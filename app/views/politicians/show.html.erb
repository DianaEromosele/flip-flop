<div class="container">
  <div class="row">
    <div class="col-xs-4">
      <%= image_tag @politician.image if @politician.image? %>
      <div class="circle"></div>
    </div>

    <div class="col-xs-8">
      <h3><%= @politician.name %></h3>
      @<%= @politician.twitter_handle %>
      </div>

  </div>

      <%= @politician.twitter_profile %>

<div class="chart">
</div>

<script>
function draw(data){
  d3.select( ".chart" )
    .selectAll( "div" )
      .data( data )
    .enter().append( "div" )
      .style( "width", function(d) { return d * 10 + "px"; })
      .text( function(d) { return d; });
  }

  function error(){
    console.log("error");
  }

      $.ajax({
           type: "GET",
           contentType: "application/json; charset=utf-8",
           url: '/graph/tweet_data',
           dataType: 'json',
           success: function(data) {
               draw(data);
           },
           error: function (result) {
               error();
           }
       });
</script>

<h2> <%= @politician.name %>'s Key Issues | Number of Tweets </h2>
<h2>
  <ol>
    <% @politician.issues.each do |issue| %>

    <li> <%=  issue.name %>: <%= link_to "#{@politician.issue_tweets(issue.name).length}", interest_path(issue, :politician_id => @politician.id) %> </li>
    <% end %>
  </ol>
</h2>


</div>


